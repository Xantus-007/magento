<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<div class="c-formNewsletter">
    <form action="<?php echo $this->getFormActionUrl() ?>" method="post" id="newsletter-validate-detail">
        <div class="c-input__holder">
            <div class="c-input__text">
                <input type="email" name="email" id="newsletter" title="<?php echo Mage::helper('core')->quoteEscape($this->__('Sign up for our newsletter')) ?>" class="input-text required required-entry validate-email" placeholder="<?php echo $this->helper('checkout')->__('Email Address'); ?>">
            </div>
            <div class="c-input__submit">
                <button type="submit">
                    <?php echo $this->__('je m\'abonne') ?>
                </button>
            </div>
        </div>
       <?php 
                        $currentStoreId = Mage::app()->getStore()->getCode();
                        $helper = Mage::helper('monbento_site/data');
                        $us = "";
                        if($currentStoreId ==="us_en") { $us = "/en"; }
                        $urlKey = $us.$helper->getKeyUrlPageCms($currentStoreId);
                ?>
        <div class="politic">
            <div class="c-checkbox--inline">
                <div class="c-checkbox">
                    <input type="checkbox" name="rgpdformnewsletter" value="1" id="checkbox_newsletter" class="checkbox required-entry">
                    <label for="checkbox_newsletter">
                               <?php echo $this->__("I agree that my data is processed in accordance with <a href='%s' target='_blank'>policy of management of the personal data</a>.", $urlKey) ?>
                    </label>
                </div>
            </div>
        </div>
    </form>
</div>
<script>
    var emailNewsletter = jQuery('.c-footer__item .c-formNewsletter .c-input__holder input[type="email"]');
    var politicNewsletter = jQuery('.c-footer__item .c-formNewsletter .politic');
    if (emailNewsletter.val() != '') {
        politicNewsletter.addClass('show');
    }

    emailNewsletter.focus(function () {
        politicNewsletter.slideDown();
    });
    emailNewsletter.focusout(function () {
        if (jQuery(this).val() != '') {
            politicNewsletter.addClass('show');
        } else {
            politicNewsletter.removeClass('show');
            politicNewsletter.slideUp();
        }
    });
</script>